<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style type="text/css">
		.test1,
		.test2,
		.test3 {
			width: 50px;
			height: 50px;
			border-radius: 25px;
		}
		.test1 {
			background: red;
		}
		.test2 {
			background: blue;
		}
		.test3 {
			background: green;
		}

	</style>
</head>
<body>	
	<div class="test1" style="margin-left:0"></div>
	<div class="test2" style="margin-left:0"></div>
	<div class="test3" style="margin-left:0"></div>

	<script type="text/javascript">
		function createPerson (name, age, job) {
			var o = new Object();
			o.name = name;
			o.age = age;
			o.job = job;
			o.sayName = function  () {
				alert(this.name);
			};
			return o;
		}

		var person1 = createPerson("su", 21, "software engineer");
		var person2 = createPerson("fu", 22, "Doctor");


	   var ball1 = document.querySelector(".test1");
	   var ball2 = document.querySelector(".test2");
	   var ball3 = document.querySelector(".test3");

		function animateDiv (ball, target, fn) {
			
			setTimeout(function  () {
				var left = parseInt(ball.style.marginLeft, 10);	
				left++;
				if (left == target) {
					resolve();
				} else {
					    if (left < target) {
					    ball.style.marginLeft = left + "px"; 
				    }	

				   animateDiv(ball, target, fn);
				}
				
			}, 13);

		}

		function promiseAnimate (ball, target) {
			return new Promise(function  (resolve, reject) {

				function animateDiv (ball, target) {
					setTimeout(function  () {
						var left = parseInt(ball.style.marginLeft, 10);	
						left++;
						if (left == target) {
							resolve()
						} else {
							    if (left < target) {
							    ball.style.marginLeft = left + "px"; 
						    }	
						   animateDiv(ball, target);
						}
						
					}, 13);
				}	
				animateDiv(ball, target);

		    })
		}

		promiseAnimate(ball1, 100)
		    .then(function  () {
		    	return promiseAnimate(ball2, 100)
		    })
		     .then(function  () {
		        return promiseAnimate(ball3, 200)
		    })
		   



		// animateDiv(ball1, 100, function  () {
		// 	animateDiv(ball2, 100 ,function  () {
		// 		animateDiv(ball3, 100, function  () {
					
		// 		})
		// 	})
		// });
	</script>
</body>
</html>