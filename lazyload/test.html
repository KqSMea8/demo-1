<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>测试懒加载</title>
        <style>


        </style>
    </head>
    <body>


        <script type="text/javascript">

        function globalEval(data) {
            data = data.replace(/^\s*|\s*$/g, '');
            if(data) {
                var head = document.getElementsByTagName('head')[0] ||
                            document.documentElement,
                script = document.createElement('script');

                script.type = 'text/script';

                script.text = data;

                console.log(script.text);

                head.appendChild(script);

                head.removeChild(script);

            }
        }

        window.onload = function () {
            (function () {
                globalEval('var test = 5;');
            })();

            console.log(test === 5)
        }


        </script>

    </body>
</html>
