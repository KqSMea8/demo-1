<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Hello React!</title>
     <script src="http://cdn.bootcss.com/react/0.14.1/react.js"></script>
    <script src="http://cdn.bootcss.com/react/0.14.1/react-dom.js"></script>
    <script src="http://cdn.bootcss.com/babel-core/5.8.32/browser.min.js"></script>
    <style type="text/css">
    	input {
    		outline: none;
    	}
    	.box {
    		width: 700px;
    		margin: 20px auto;
    		background-color: #f5f5f5;
    	}
		header {
			text-align: center;
			font-size: 50px;
			color: #e9d6d6;
		}	
		.input {
			text-align: center;
		}
		.input>input{
			width: 80%;
			height: 30px;
		}
		
		ul {
			list-style: none;
		}
		.select {
			width: 40px;
			height: 40px;
			border-radius: 50%;
			border: 1px solid #dbebe8;
		}

		.checkbox {
			width: 30px;
			height: 30px;
			vertical-align: top;
			-webkit-appearance: none;
			border-radius: 50%;
			outline: none;
			background-color: #fff;	
		}
	
		.completed label {
			text-decoration: line-through;
		}

		.checkbox:checked::after,
		.completed .checkbox::after {
			content: '\2714';
			margin-left: 5px;
		    color: #758794; 
		    width: 100%; 
		    text-align: center; 
		    font-size: 2em; 
		    padding: 1px 0 0 0; 
		    vertical-align: text-top;
		}
		.value {
			display: inline-block;
			width: 75%;
			height: 40px;
			line-height: 40px;
			border: 1px solid #fff;
		}

		.filters {
			display: inline-block;
			margin-left: 150px;
		}
		.footer button {
			float: right;
		}
    </style>
  </head>
  <body>
   <section id="AppRoot" class="todoapp"></section>
    <script type="text/babel">
    	var todolist = {
    		name: 'todos',
    		todos: [{
    			completed: true,
    			title: 'learn react'
    		},{
    			completed: false,
    			title: 'learn redux'
    		},{
    			completed: false,
    			title: 'learn webpack'
    		},{
    			completed: false,
    			title: 'learn less'
    		}]
    	}

    	var App = React.createClass({
    		var style = {
    			background: 'red',
    			height: 100,
    			width: 100
    		},

    		render: function  () {
    			return <div className="box">
    				<Header />
    				<TodoList />
    				<Footer />
    			</div>
    		}
    	})

    	var Header = React.createClass({
    		render: function  () {
    			return <div>
    				<header>todos</header>
    				<div className="input">
						<input placeholder="what need to be done?"/>
					</div>
    			</div>
    		}
    	})

    	var TodoList = React.createClass({
    		render: function  () {
    			return <ul>
    				{todolist.todos.map(function(value, i) {
    					var className = "";
			    		if (value.completed){
			    			className = "completed";
			    		}
			    		return <TodoItem className={className} key={i} value={value} />
    				})}
    			</ul>
    		}
    	})

    	var TodoItem = React.createClass({
    		render: function  () {
    			return <li className={this.props.className} >
							<input className="checkbox" type="checkbox" />
							<label  className="value">{this.props.value.title}</label>
						</li>
    		}
    	})

    	var Footer = React.createClass({
    		render: function  () {
    			
    			//计算还有多少个未完成的
    			var lefted = todolist.todos.reduce(function  (acc, todo) {
    				return todo.completed ? acc : acc + 1;
    			}, 0);

    			return <div className="footer">
						    <span>{lefted} items left</span>
						    <div className="filters">
								<a href="#">All</a>
								<a href="#">Active</a>
								<a href="#">Completed</a>
						    </div>
						    <button>Clear completed</button>
						</div>
    		}
    	})
		ReactDOM.render(<App />, document.getElementById('AppRoot'));


		var MyMixin1 = {
			componentDidMount: function  () {
				console.log('auto do something when component did mount');
			}
		}

		var MyMixin2 = {
			someMethod: function  () {
				console.log('doSomething');
			}
		}

		var MyComponnet = React.createClass({
			mixins: [MyMixin1, MyMixin2],
			componentDidMount: function  () {

				// 调用mixin1共享的方法
				this.someMethod();
			}
		})

		var MyComponnet = React.createClass({
			statics: {
				customMethod: function  (foo) {
					return foo === 'bar';
				}
			}
		})

		MyComponnet.customMethod('bar');

		var MyComponnet = React.createClass({
			displayName: 'MyComponent'
		})

		var myComponent = React.createClass({
			render: function  () {
				return <div></div>
			},

			componentDidMount: function  () {
				var root = ReactDOM.findDOMNode(this);
				console.log(root);
			}

		})

		var MyComponnet = React.createClass({
			render: function  () {
				return <div>
					<button ref="btn"></button>
					<a href="" ref="link"></a>
				</div>
			},

			componentDidMount: function  () {
				var btn = this.refs.btn;
				var link = this.refs.link;
				console.log(btn, link);
			}
		})

		var MyComponnet = React.createClass({
			render: function  () {
				return <div>
					<button onClick={this.onClick}>Click me</button>
				</div>
			},

			onClick: function  () {
				console.log('click me');
			}
		})

		function onClick (event) {
			console.log(event);
			console.log(event.type);
			var eventType = event.type;

			setTimeout(function  () {
				console.log(event.type);
				console.log(eventType);
			}, 0);

			this.setState({clickEvent: event});
			this.setState({eventType: event.type})
		}


    </script>
  </body>
</html>